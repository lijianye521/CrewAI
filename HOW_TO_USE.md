# CrewAI 多智能体会议系统 - 使用指南

## 📋 项目概述

CrewAI 多智能体会议系统是一个基于 AI 的智能会议平台，支持多个虚拟智能体参与实时讨论，提供完整的会议管理、实时对话和录像回放功能。

### 🚀 核心功能
- **智能体管理**: 创建和配置具有不同个性的AI智能体
- **实时会议**: 智能体自动参与讨论，生成有价值的观点
- **会议录像**: 完整记录会议过程，支持回放和分析
- **系统配置**: 灵活配置AI模型和参数

## 🛠️ 快速启动

### 1. 启动服务

**方法一：使用批处理脚本（推荐）**
```bash
# 启动后端
双击 start-backend.bat
# 访问: http://localhost:8001

# 启动前端  
双击 start-frontend.bat
# 访问: http://localhost:3000
```

**方法二：手动启动**
```bash
# 后端启动
cd backend
python -m venv venv
venv\Scripts\activate  # Windows
# source venv/bin/activate  # Linux/Mac
pip install -r requirements.txt
python main.py

# 前端启动（新终端）
cd frontend/crewai-frontend
npm install
npm run dev
```

### 2. 访问系统
- **前端界面**: http://localhost:3000
- **后端API**: http://localhost:8001
- **API文档**: http://localhost:8001/docs

## ⚙️ 系统配置（重要！）

### 配置 DeepSeek API 密钥

**为了让智能体正常对话，必须配置有效的 DeepSeek API 密钥！**

#### 方法一：通过前端界面配置（推荐）
1. 打开前端界面 http://localhost:3000
2. 点击左侧菜单 "系统配置"
3. 在 "模型配置" 部分填入：
   - **API Key**: 你的 DeepSeek API 密钥
   - **Base URL**: `https://api.deepseek.com`
   - **模型**: `deepseek-chat`
   - **最大Token数**: `2000`
   - **温度**: `0.7`
4. 点击 "保存配置"

#### 方法二：通过API配置
```bash
curl -X POST "http://localhost:8001/api/v1/config/models" \
  -H "Content-Type: application/json" \
  -d '{
    "openai_api_key": "你的DeepSeek API密钥",
    "openai_base_url": "https://api.deepseek.com",
    "model": "deepseek-chat",
    "max_tokens": 2000,
    "temperature": 0.7
  }'
```

### 获取 DeepSeek API 密钥
1. 访问 [DeepSeek 官网](https://platform.deepseek.com/)
2. 注册账户并登录
3. 在 API Keys 页面创建新的 API 密钥
4. 复制密钥并在系统中配置

## 📖 功能使用指南

### 1. 智能体管理

#### 创建智能体
1. 点击左侧菜单 "智能体管理" → "创建智能体"
2. 填写基本信息：
   - **姓名**: 智能体名称
   - **角色**: 职位描述
   - **目标**: 智能体的工作目标
   - **背景故事**: 详细的背景描述
3. 配置个性特征：
   - **个性类型**: 理性分析型、创新思维型等
   - **决策方式**: 数据驱动、直觉导向等
   - **沟通风格**: 专业严谨、友善亲切等
4. 设置说话风格：
   - **语调**: 正式专业、友善亲切等
   - **句子长度**: 简洁明了、详细描述等
   - **词汇水平**: 专业术语、通俗易懂等
5. 点击 "创建智能体"

#### 管理智能体
- **查看列表**: 在 "智能体管理" 页面查看所有智能体
- **编辑信息**: 点击智能体卡片的编辑按钮
- **激活/禁用**: 切换智能体的活跃状态
- **删除智能体**: 谨慎操作，删除后无法恢复

### 2. 会议管理

#### 创建会议
1. 点击左侧菜单 "会议管理" → "创建会议"
2. 填写会议基本信息：
   - **会议标题**: 会议名称
   - **讨论主题**: 具体讨论内容
   - **会议描述**: 详细说明
3. 配置会议规则：
   - **最大参与者数**: 建议3-8人
   - **会议时长限制**: 60-120分钟
   - **单次发言时长**: 60-180秒
   - **讨论轮数**: 3-5轮
4. 设置讨论配置：
   - **背景描述**: 讨论背景和环境
   - **期望结果**: 希望达成的目标
   - **讨论风格**: 开放式讨论、结构化讨论等
5. 选择参与的智能体
6. 点击 "创建会议"

#### 启动会议
1. 在会议列表中找到目标会议
2. 点击 "开始会议" 按钮
3. 系统自动将会议状态切换为 "进行中"
4. 点击 "进入实时会议" 查看实时对话

### 3. 实时会议功能

#### 进入实时会议页面
- 方式一: 从会议列表点击 "进入实时会议"
- 方式二: 直接访问 `/meetings/live/[会议ID]`

#### 实时会议界面功能
- **智能体列表**: 左侧显示参与的智能体信息
- **实时对话**: 右侧显示智能体的实时对话
- **会议控制**: 
  - **开始对话**: 启动智能体自动讨论
  - **暂停对话**: 暂停智能体发言
- **会议统计**: 显示参与者数量、消息数量等
- **实时连接状态**: 显示与后端的连接状态

#### 智能体对话过程
1. 点击 "开始对话" 按钮
2. 智能体将根据会议主题开始讨论
3. 每个智能体会基于自己的角色和个性发表观点
4. 对话内容会实时显示在界面上
5. 系统会自动保存所有对话记录

### 4. 会议录像回放

#### 查看会议历史
1. 点击左侧菜单 "会议历史"
2. 查看已完成的会议列表
3. 点击 "查看回放" 进入录像页面

#### 回放功能使用
- **播放控制**: 播放、暂停、快进、快退
- **进度条**: 拖拽跳转到任意时间点
- **播放速度**: 0.5x - 3x 可调节
- **事件导航**: 按事件逐步播放
- **参与者信息**: 显示会议参与的智能体
- **统计信息**: 消息数量、发言人数等

## 🔧 高级配置

### 模型参数调优
- **温度值 (Temperature)**:
  - 0.1-0.3: 更稳定和一致的输出
  - 0.7-0.9: 更有创意和多样性的输出
- **最大Token数**:
  - 建议1000-3000，根据智能体角色调整
- **模型选择**:
  - `deepseek-chat`: 适合日常对话
  - `deepseek-reasoner`: 适合复杂推理

### 智能体个性优化
- **专业型智能体**: 低温度、详细背景、专业术语
- **创意型智能体**: 高温度、开放思维、灵活表达
- **分析型智能体**: 中等温度、逻辑清晰、数据驱动

## 🚨 常见问题

### Q: 智能体不说话怎么办？
**A**: 检查以下几点：
1. 确保配置了有效的 DeepSeek API 密钥
2. 检查网络连接是否正常
3. 查看后端日志是否有错误信息
4. 确认智能体状态为"活跃"

### Q: 如何获取 DeepSeek API 密钥？
**A**: 
1. 访问 https://platform.deepseek.com/
2. 注册并登录账户
3. 在 API Keys 页面创建密钥
4. 复制密钥到系统配置中

### Q: 会议创建成功但无法启动？
**A**: 
1. 确保至少添加了一个活跃的智能体
2. 检查会议状态是否正确
3. 刷新页面重试

### Q: 实时连接显示断开？
**A**:
1. 检查后端服务是否正常运行
2. 确认端口8001没有被占用
3. 刷新页面重新连接

## 📊 系统监控

### 健康检查
```bash
# 检查后端服务状态
curl http://localhost:8001/health

# 检查模型配置
curl http://localhost:8001/api/v1/config/models
```

### 日志查看
- **后端日志**: 在启动后端的终端中查看
- **前端日志**: 在浏览器开发者工具中查看
- **API调用**: 在后端日志中查看请求响应

## 💡 最佳实践

### 智能体设计
1. **角色多样化**: 创建不同专业背景的智能体
2. **个性鲜明**: 每个智能体都应有独特的说话风格
3. **背景丰富**: 详细的背景故事有助于生成更好的对话

### 会议主题设置
1. **主题明确**: 避免过于宽泛的讨论话题
2. **背景充分**: 提供足够的上下文信息
3. **目标清晰**: 明确希望达成的讨论结果

### 系统性能
1. **智能体数量**: 建议单次会议3-8个智能体
2. **会议时长**: 建议控制在60-120分钟
3. **资源监控**: 定期检查系统资源使用情况

## 🔄 版本更新

当前版本: **v2.0.0**

### 更新内容
- ✅ 完整的多智能体会议系统
- ✅ 实时对话和消息流
- ✅ 会议录像回放功能
- ✅ 系统配置管理
- ✅ DeepSeek AI 模型集成

### 升级说明
如需升级系统，请备份数据库文件 `backend/crewai_meeting.db`

## 📞 技术支持

如遇到问题，请：
1. 查看本文档的常见问题部分
2. 检查系统日志输出
3. 确认API密钥配置正确
4. 联系技术支持团队

---

**祝您使用愉快！** 🎉